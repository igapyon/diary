<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<TITLE>2006/12/29 ���L: blancoDbPhp���J�x�[�^�ł̃����[�X</TITLE>
<META name="DESCRIPTION" content="blanco Framework �� SQL��`������PHP�\�[�X�R�[�h��������������c�[���ł��� blancoDbPhp�̌��J�x�[�^�ł������[�X���܂����B">
<META name="KEYWORDS" content="�����҂��̓��Lv2,diary,igapyon">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 9.0.1.0 for Windows">
<META name="DATE" content="2010-09-27T20:42:49+09:00">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<LINK rel="INDEX" href="index.html">
<LINK rel="CONTENTS" href="index.html">
<LINK rel="stylesheet" href="../../css/table.css" type="text/css" id="_HPB_TABLE_CSS_ID_">
</HEAD>
<BODY bgcolor="#eeddcc">
<TABLE border="0"><TBODY><TR>
  <TD valign="top">
    <A href="../memo/memoigapyon.html">
      <IMG src="../../image/iga200306s.jpg" border="0" ALT="�����҂��摜(��) 2003/06">
    </A>
  </TD>
  <TD valign="top">
    <H2>2006/12/29 ���L: blancoDbPhp���J�x�[�^�ł̃����[�X</H2>
    <P>[�����҂��̓��Lv2,diary,igapyon] blanco Framework �� SQL��`������PHP�\�[�X�R�[�h��������������c�[���ł��� blancoDbPhp�̌��J�x�[�^�ł������[�X���܂����B</P>
  </TD>
</TR></TBODY></TABLE>

<!-- adv -->
<CENTER>
<TABLE bgcolor="#ffff00" summary="adv">
  <TBODY>
    <TR>

      <TD align="center">�L��: <A href="http://journal.mycom.co.jp/column/ide/091/">�C�}�h�L��IDE����: Eclipse�x�[�X�̓����|����uBenten�v���g���Ă݂悤</A> <FONT color="#ff0000" size="-1">09/27</FONT><BR>
        <FONT size="-1">������������̎�ɂ�� Benten �Љ�L��!</FONT></TD>

    </TR>
  </TBODY>
</TABLE>
</CENTER>
<!-- adv -->




<P> </P>

<DIV align="right">
<TABLE cellpadding="4">
  <TBODY>
    <TR bgcolor="#99ccff">
      <TD><A href="../idxall.html">�C���f�B�b�N�X�y�[�W�֖߂�</A></TD>
    </TR>
  </TBODY>
</TABLE>
</DIV>



<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>blancoDbPhp���J�x�[�^�ł̃����[�X</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P><A HREF="https://www.igapyon.jp/blanco/blanco.ja.html" TITLE="blanco Framework �� �I�[�v���\�[�X�Œ񋟂���Ă��� blancoDb��blancoStruts�Ȃǂ̏W���̂ł��B��{�I�� Java�\�[�X�R�[�h�����������傽��ړI�Ƃhttps://www.igapyon.jp/rk</A> �� SQL��`������PHP�\�[�X�R�[�h��������������c�[���ł��� <A HREF="http://www.igapyon.jp/blanco/blancodbphp.html" TITLE="�uSQL��`���v�Ƃ��� Excel�u�b�N����A�f�[�^�x�[�X���o�͂̂��߂� PHP�\�[�X�R�[�h�������������܂��B">blancoDbPhp</A>�̌��J�x�[�^�ł������[�X���܂����B</P>
<P>blancoDbPhp�� <A HRhttps://www.igapyon.jp/.jp/blanco/blancodb.html" TITLE="�uSQL��`���v�Ƃ��� Excel�u�b�N����A�f�[�^�x�[�X���o�͂̂��߂̃\�[�X�R�[�h�������������܂��B">blancoDb</A>��PHP�łł��B</P>
<UL>
  <LI>�f�[�^�x�[�X���o�͂� PDO (PHP Data Object) �𗘗p����\�[�X�R�[�h�������������邱�Ƃ��ł��܂��B
  <LI>SQL��`������уf�[�^�x�[�X�X�L�[�}����͂Ƃ��āAPHP�f�[�^�x�[�X���o�̓\�[�X�R�[�h�����������ł��܂��B<BR>
  �\�[�X�R�[�h���������A�v���[�`�ɂ���āASQL�C���W�F�N�V�����Ȃǂ̃Z�L�����e�B���X�N�̂قƂ�ǂ�o�ł��邱�Ƃ��ł��܂��B
  <LI>���� PostgreSQL�ł̂ݓ���m�F�����{����Ă��܂��B<BR>
  PDO�x�[�X�Ȃ̂� ���̃����[�V���i���f�[�^�x�[�X�ł����삷��\���͂���܂��B<BR>
  �����̃����[�V���i���f�[�^�x�[�X�ł̓���m�F�������񂹂����������Ƃ����҂��܂��BPostgreSQL��ł̓���m�F�������}���܂��B
  <LI>�����_�ł� ����n�̂ݎ�������Ă��܂��B<BR>
  blancoDb�Ƃ��Ă� ��Ӑ���ᔽ�Ȃǂُ̈�n�� blanco���L�̗�O�ւƋl�ߑւ���̂����V�Ȃ̂ł����A�����_�ł� PDO������������
  PDOException��O�� ���̂܂܃X���[�����悤�ɂȂ��Ă��܂��B
  <LI>�f�[�^�x�[�X���o�͕͂����񂨂�ѐ��l�݂̂ɑΉ����Ă��܂��B<BR>
  ���t�^�Ȃǂ͑S���������Ă��܂���B(�����Ă����炭 �K�؂ɂ͓��삵�Ȃ��Ǝv���܂�)
</UL>
<P>blancoDbPhp�̊J���ɂ������� �����͂����������F�l�ɁA��ϊ��ӂ��Ă��܂��B���肪�Ƃ��������܂��B<BR>
�������� �����Ă���܂ňȏ�� �݂Ȃ��܂���̃t�B�[�h�o�b�N�� blancoDbPhp�̔��W�ɕK�v�ł��B�t�B�[�h�o�b�N�� ���҂����Ă���܂��B</P>
<P><FONT color="#ff00ff">blancoDbPhp�v���O�C���C���X�g�[���ɍۂ���</FONT></P>
<P><A HREF="https://www.igapyon.jp/blanco/blancodb.html" TITLE="�uSQL��`���v�Ƃ��� Excel�u�b�N����A�f�[�^�x�[�X���o�͂̂��߂̃\�[�X�R�[�h�������������܂��B">blancoDb</A>�n��Eclipse�v���O�C���̃C���X�g�[���́A���� blanco Framework�v���_�N�g�Q�̃C���X�g�[���ɔ�ׂď�����Ԃ�������܂��B</P>
<UL>
  <LI>blancoDbPhp�v���O�C���� �𓀂��� Eclipse�v���O�C���t�H���_�ɓW�J���܂��B
  <LI>JDBC�h���C�o�� �𓀌�� blancoDbPhp�v���O�C���� lib�t�H���_�Ɋi�[���܂��B
  <LI>�K�v�ɉ����� METAFILE.MF�t�@�C����ҏW����K�v������܂��B
</UL>
<P>�ڂ�����񂪍ڂ����`���[�g���A�����쐬����v��͂���܂����A�����_�� PHP�ł̃`���[�g���A���͂���܂���BPHP�Ń`���[�g���A�����񋟂����܂ł́A<A href="http://cvs.sourceforge.jp/cgi-bin/viewcvs.cgi/*checkout*/blancofw/blancoMisc/doc/db/blancoDbTutorial.doc">blancoDb �`���[�g���A��</A>�Ȃǂ��Q�l�� �撣���ăC���X�g�[�����Ă��������B</P>
<P><FONT color="#ff00ff">�������������\�[�X�R�[�h�̗�</FONT></P>
<P>blancoDbPhp���g���� ���L�̂悤�ȃ\�[�X�R�[�h�������������邱�Ƃ��ł��܂��B������ �f�[�^�x�[�X�X�L�[�}���玩���������ꂽ���̂ł��B(Simple����n�܂���̂́ASQL��`���̋L���𔺂킸�Ɏ����������ꂽ�\�[�X�R�[�h�ł�)</P>
<BLOCKQUOTE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD bgcolor="#ffff00">�����^�̗�</TD>
    </TR>
  </TBODY>
</TABLE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD><pre>&lt;?php
/*
 * This code is generated by blanco Framework.
 */
/*. DOC &lt;@package myapp.db.query;&gt;.*/

require_once('myapp/db/exception/NoRowFoundException.php');
require_once('myapp/db/exception/TooManyRowsFoundException.php');
require_once('myapp/db/row/SimpleAuthorSelectRow.php');
/*. require_module 'pdo'; .*/;
/*. require_module 'standard'; .*/;

/**
 * SimpleAuthorSelectIterator�N���X
 *
 * QueryIterator�ɑ�����N���X�ł��B
 * �����^SQL�������b�s���O���Ċe��A�N�Z�T��񋟂��܂��B
 * �V���O������: �L�� (���҂��鏈��������1��)
 */
class SimpleAuthorSelectIterator {
    /**
     * ���̃N���X�������I�ɗ��p����f�[�^�x�[�X�ڑ��I�u�W�F�N�g�B
     *
     *
     * �f�[�^�x�[�X�ڑ��I�u�W�F�N�g�̓R���X�g���N�^�̈����Ƃ��ĊO������^�����܂��B
     */
    protected /*.PDO.*/ $fConnection;

    /**
     * ���̃N���X�������I�ɗ��p����X�e�[�g�����g�I�u�W�F�N�g�B
     *
     *
     * ���̃I�u�W�F�N�g�͓����I�ɗ��p����܂��B
     */
    protected /*.PDOStatement.*/ $fStatement;

    /**
     * ���݃t�F�b�`���Ă���s�̓��e�B
     */
    protected /*.array.*/ $fCurrentRow;

    /**
     * SimpleAuthorSelectIterator�N���X�̃R���X�g���N�^�ł��B
     *
     * �����ӁF�N���X�𗘗p��A�Ō�ɕK��close()���\�b�h���Ăяo���K�v������܂��B
     *
     * @param PDO $connection �f�[�^�x�[�X�ڑ�
     */
    public /*.void.*/ function __construct(/*.PDO.*/ $connection) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 1) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.SimpleAuthorSelectIterator �̃p�����[�^��[1]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if ($connection instanceof pdo.PDO === FALSE) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.SimpleAuthorSelectIterator ��1�Ԗڂ̃p�����[�^��[pdo.PDO]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . get_class($connection) . ']�^���^�����܂����B');
        }

        $this-&gt;fConnection = $connection;
    }

    /**
     * �N�G���̎擾���\�b�h
     *
     * ���ۂɎ��s����SQL����߂��܂��B
     *
     * @return string ���ۂɎ��s�����SQL��
     */
    public /*.string.*/ function getQuery() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.getQuery �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $buf = 'SELECT ';
        $buf = $buf . '        author_code ';
        $buf = $buf . '        ,author_name ';
        $buf = $buf . '        ,author_name_kana ';
        $buf = $buf . '        ,date_of_birth ';
        $buf = $buf . '        ,gender_code ';
        $buf = $buf . '    FROM ';
        $buf = $buf . '        author ';
        $buf = $buf . '    WHERE ';
        $buf = $buf . '        author_code = :inParamAuthorCode';
        return $buf;
    }

    /**
     * ���p����Ă����f�[�^�x�[�X���\�[�X���J�����܂��B
     *
     * �N���X�̗��p���I������ۂɕK�����̃��\�b�h���Ăяo���Ă��������B
     */
    public /*.void.*/ function close() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.close �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $this-&gt;fCurrentRow = NULL;

        if ($this-&gt;fStatement != NULL) {
            $this-&gt;fStatement-&gt;closeCursor();
            $this-&gt;fStatement = NULL;
        }
    }

    /**
     * �N�G���̃v���R���p�C���ɑ������܂��B
     *
     * ���I�ɓ��e���ω�����悤��SQL�����s����K�v������ꍇ�ɂ̂݁A������̃��\�b�h�𗘗p���܂��B
     * ��SQL�����̂��̂��p�����[�^�Ƃ��ė^���邱�Ƃ��ł��Ď��R�x����������ASQL�C���W�F�N�V�����ƌĂ΂��Z�L�����e�B�z�[������������댯������_�ɒ��ӂ�����ŗ��p���Ă��������B
     * �����I�ɂ� SQL�����t�B�[���h�ϐ��ɋL�����܂��B
     *
     * @param string $query ���p�������N�G��(SQL��)
     */
    public /*.void.*/ function prepareStatementSql(/*.string.*/ $query) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 1) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.prepareStatementSql �̃p�����[�^��[1]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if (gettype($query) !== 'string' &amp;&amp; gettype($query) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.prepareStatementSql ��1�Ԗڂ̃p�����[�^��[string]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($query) . ']�^���^�����܂����B');
        }

        $this-&gt;close();
        $this-&gt;fStatement = $this-&gt;fConnection-&gt;prepare($query);
    }

    /**
     * �N�G���̃v���R���p�C�������{���܂��B
     *
     * ���炩���ߗ^�����Ă����N�G��(SQL��)�𗘗p���܂��B
     */
    public /*.void.*/ function prepareStatement() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.prepareStatement �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $this-&gt;close();
        $this-&gt;prepareStatementSql($this-&gt;getQuery());
    }

    /**
     * �N�G���ɗ^������̓p�����[�^���Z�b�g���܂��B
     *
     * @param integer $inParamAuthorCode 'inParamAuthorCode' SQL���̓p�����[�^�BDB��̌^��[INTEGER]
     */
    public /*.void.*/ function setInputParameter(/*.int.*/ $inParamAuthorCode) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 1) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.setInputParameter �̃p�����[�^��[1]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if (gettype($inParamAuthorCode) !== 'integer' &amp;&amp; gettype($inParamAuthorCode) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.setInputParameter ��1�Ԗڂ̃p�����[�^��[integer]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamAuthorCode) . ']�^���^�����܂����B');
        }

        if ($this-&gt;fStatement == NULL) {
            $this-&gt;prepareStatement();
        }

        // SQL���̓p�����[�^[inParamAuthorCode]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamAuthorCode', $inParamAuthorCode, PDO::PARAM_INT);
    }

    /**
     * �����^�N�G�������s���܂��B
     */
    public /*.void.*/ function executeQuery() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.executeQuery �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        if ($this-&gt;fStatement == NULL) {
            $this-&gt;prepareStatement();
        }
        // TODO ��O��������������Ă��܂���B
        $result = $this-&gt;fStatement-&gt;execute();
    }

    /**
     * �J�[�\�������݂̈ʒu����1�s���ֈړ����܂��B
     *
     *
     * �V���O���������L���Ȃ̂ŃX�R�[�v��protected�Ƃ��܂��B
     *
     * @return boolean �V�������݂̍s���L���ȏꍇ��TRUE�A����ȏ�̍s���Ȃ��ꍇ��FALSE�B
     */
    protected /*.boolean.*/ function next() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.next �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        if ($this-&gt;fCurrentRow == NULL) {
            $this-&gt;executeQuery();
        }

        $result = $this-&gt;fStatement-&gt;fetch();
        if (($result !== FALSE)) {
            $this-&gt;fCurrentRow = $result;
            return TRUE;
        }
        return FALSE;
    }

    /**
     * ���݂̍s�̃f�[�^���I�u�W�F�N�g�Ƃ��Ď擾���܂��B
     *
     * �V���O���������L���Ȃ̂ŃX�R�[�v��protected�Ƃ��܂��B
     * ���̃��\�b�h�̑���� GetSingleRow���\�b�h�𗘗p���Ă��������B
     *
     * @return SimpleAuthorSelectRow �s�I�u�W�F�N�g
     */
    protected /*.SimpleAuthorSelectRow.*/ function getRow() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.getRow �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $result = new SimpleAuthorSelectRow();
        $result-&gt;setAuthorCode($this-&gt;fCurrentRow[0]);
        $result-&gt;setAuthorName($this-&gt;fCurrentRow[1]);
        $result-&gt;setAuthorNameKana($this-&gt;fCurrentRow[2]);
        $result-&gt;setDateOfBirth($this-&gt;fCurrentRow[3]);
        $result-&gt;setGenderCode($this-&gt;fCurrentRow[4]);

        return $result;
    }

    /**
     * ���݂̍s�̃f�[�^���I�u�W�F�N�g�Ƃ��Ď擾���܂��B
     *
     * ���̃��\�b�h�𗘗p����ꍇ�ɂ́Anext()�Ȃǂ̃J�[�\���𑀍삷�郁�\�b�h�Ƃ͕��p���Ȃ��ł��������B
     *
     * single�������L��
     * �������ʂ�1���ȊO�̏ꍇ�ɂ́ANotSingleRowException�N���X��
     * �h�������N���X�̗�O���������܂��B
     *
     * @return SimpleAuthorSelectRow �s�I�u�W�F�N�g
     */
    public /*.SimpleAuthorSelectRow.*/ function getSingleRow() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.getSingleRow �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        if ($this-&gt;next() == FALSE) {
            throw new NoRowFoundException(&quot;�s�������ł��܂���ł����B&quot;);
        }

        $result = $this-&gt;getRow();

        if ($this-&gt;next()) {
            throw new TooManyRowsFoundException(&quot;1���ȏ�̍s����������܂����B&quot;);
        }

        return $result;
    }

    /**
     * �X�e�[�g�����g (PDOStatement) ���擾���܂��B
     *
     * ���̃��\�b�h���Ăяo�����Ƃ͐�������܂���B��ʓI�� Statement�𒼐ڗ��p����K�v�͂���܂���B
     *
     * @return PDOStatement Statement�I�u�W�F�N�g
     */
    public /*.PDOStatement.*/ function getStatement() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorSelectIterator.getStatement �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        return $this-&gt;fStatement;
    }
}
?&gt;</pre></TD>
    </TR>
  </TBODY>
</TABLE>
</BLOCKQUOTE>
<BLOCKQUOTE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD bgcolor="#ffff00">���s�^�̗�</TD>
    </TR>
  </TBODY>
</TABLE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD>
      <pre>&lt;?php
/*
 * This code is generated by blanco Framework.
 */
/*. DOC &lt;@package myapp.db.query;&gt;.*/

require_once('myapp/db/exception/IntegrityConstraintException.php');
require_once('myapp/db/exception/NoRowModifiedException.php');
require_once('myapp/db/exception/TooManyRowsModifiedException.php');
/*. require_module 'pdo'; .*/;
/*. require_module 'standard'; .*/;

/**
 * SimpleAuthorInsertInvoker�N���X
 *
 * QueryInvoker�ɑ�����N���X�ł��B
 * ���s�^SQL�������b�s���O���Ċe��A�N�Z�T��񋟂��܂��B
 * �V���O������: �L�� (���҂��鏈��������1��)
 */
class SimpleAuthorInsertInvoker {
    /**
     * ���̃N���X�������I�ɗ��p����f�[�^�x�[�X�ڑ��I�u�W�F�N�g�B
     *
     *
     * �f�[�^�x�[�X�ڑ��I�u�W�F�N�g�̓R���X�g���N�^�̈����Ƃ��ĊO������^�����܂��B
     */
    protected /*.PDO.*/ $fConnection;

    /**
     * ���̃N���X�������I�ɗ��p����X�e�[�g�����g�I�u�W�F�N�g�B
     *
     *
     * ���̃I�u�W�F�N�g�͓����I�ɗ��p����܂��B
     */
    protected /*.PDOStatement.*/ $fStatement;

    /**
     * SimpleAuthorInsertInvoker�N���X�̃R���X�g���N�^�ł��B
     *
     * �����ӁF�N���X�𗘗p��A�Ō�ɕK��close()���\�b�h���Ăяo���K�v������܂��B
     *
     * @param PDO $connection �f�[�^�x�[�X�ڑ�
     */
    public /*.void.*/ function __construct(/*.PDO.*/ $connection) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 1) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.SimpleAuthorInsertInvoker �̃p�����[�^��[1]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if ($connection instanceof pdo.PDO === FALSE) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.SimpleAuthorInsertInvoker ��1�Ԗڂ̃p�����[�^��[pdo.PDO]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . get_class($connection) . ']�^���^�����܂����B');
        }

        $this-&gt;fConnection = $connection;
    }

    /**
     * �N�G���̎擾���\�b�h
     *
     * ���ۂɎ��s����SQL����߂��܂��B
     *
     * @return string ���ۂɎ��s�����SQL��
     */
    public /*.string.*/ function getQuery() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.getQuery �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $buf = 'INSERT ';
        $buf = $buf . '    INTO ';
        $buf = $buf . '        author ( ';
        $buf = $buf . '            author_code ';
        $buf = $buf . '            ,author_name ';
        $buf = $buf . '            ,author_name_kana ';
        $buf = $buf . '            ,date_of_birth ';
        $buf = $buf . '            ,gender_code ';
        $buf = $buf . '        ) ';
        $buf = $buf . '    VALUES ( ';
        $buf = $buf . '        :inParamAuthorCode ';
        $buf = $buf . '        ,:inParamAuthorName ';
        $buf = $buf . '        ,:inParamAuthorNameKana ';
        $buf = $buf . '        ,:inParamDateOfBirth ';
        $buf = $buf . '        ,:inParamGenderCode ';
        $buf = $buf . '    )';
        return $buf;
    }

    /**
     * ���p����Ă����f�[�^�x�[�X���\�[�X���J�����܂��B
     *
     * �N���X�̗��p���I������ۂɕK�����̃��\�b�h���Ăяo���Ă��������B
     */
    public /*.void.*/ function close() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.close �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        if ($this-&gt;fStatement != NULL) {
            $this-&gt;fStatement-&gt;closeCursor();
            $this-&gt;fStatement = NULL;
        }
    }

    /**
     * �N�G���̃v���R���p�C���ɑ������܂��B
     *
     * ���I�ɓ��e���ω�����悤��SQL�����s����K�v������ꍇ�ɂ̂݁A������̃��\�b�h�𗘗p���܂��B
     * ��SQL�����̂��̂��p�����[�^�Ƃ��ė^���邱�Ƃ��ł��Ď��R�x����������ASQL�C���W�F�N�V�����ƌĂ΂��Z�L�����e�B�z�[������������댯������_�ɒ��ӂ�����ŗ��p���Ă��������B
     * �����I�ɂ� SQL�����t�B�[���h�ϐ��ɋL�����܂��B
     *
     * @param string $query ���p�������N�G��(SQL��)
     */
    public /*.void.*/ function prepareStatementSql(/*.string.*/ $query) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 1) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.prepareStatementSql �̃p�����[�^��[1]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if (gettype($query) !== 'string' &amp;&amp; gettype($query) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.prepareStatementSql ��1�Ԗڂ̃p�����[�^��[string]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($query) . ']�^���^�����܂����B');
        }

        $this-&gt;close();
        $this-&gt;fStatement = $this-&gt;fConnection-&gt;prepare($query);
    }

    /**
     * �N�G���̃v���R���p�C�������{���܂��B
     *
     * ���炩���ߗ^�����Ă����N�G��(SQL��)�𗘗p���܂��B
     */
    public /*.void.*/ function prepareStatement() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.prepareStatement �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $this-&gt;close();
        $this-&gt;prepareStatementSql($this-&gt;getQuery());
    }

    /**
     * �N�G���ɗ^������̓p�����[�^���Z�b�g���܂��B
     *
     * @param integer $inParamAuthorCode 'inParamAuthorCode' SQL���̓p�����[�^�BDB��̌^��[INTEGER]
     * @param string $inParamAuthorName 'inParamAuthorName' SQL���̓p�����[�^�BDB��̌^��[VARCHAR]
     * @param string $inParamAuthorNameKana 'inParamAuthorNameKana' SQL���̓p�����[�^�BDB��̌^��[VARCHAR]
     * @param string $inParamDateOfBirth 'inParamDateOfBirth' SQL���̓p�����[�^�BDB��̌^��[DATE]
     * @param integer $inParamGenderCode 'inParamGenderCode' SQL���̓p�����[�^�BDB��̌^��[INTEGER]
     */
    public /*.void.*/ function setInputParameter(/*.int.*/ $inParamAuthorCode, /*.string.*/ $inParamAuthorName, /*.string.*/ $inParamAuthorNameKana, /*.string.*/ $inParamDateOfBirth, /*.int.*/ $inParamGenderCode) {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 5) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter �̃p�����[�^��[5]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }
        if (gettype($inParamAuthorCode) !== 'integer' &amp;&amp; gettype($inParamAuthorCode) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter ��1�Ԗڂ̃p�����[�^��[integer]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamAuthorCode) . ']�^���^�����܂����B');
        }
        if (gettype($inParamAuthorName) !== 'string' &amp;&amp; gettype($inParamAuthorName) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter ��2�Ԗڂ̃p�����[�^��[string]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamAuthorName) . ']�^���^�����܂����B');
        }
        if (gettype($inParamAuthorNameKana) !== 'string' &amp;&amp; gettype($inParamAuthorNameKana) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter ��3�Ԗڂ̃p�����[�^��[string]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamAuthorNameKana) . ']�^���^�����܂����B');
        }
        if (gettype($inParamDateOfBirth) !== 'string' &amp;&amp; gettype($inParamDateOfBirth) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter ��4�Ԗڂ̃p�����[�^��[string]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamDateOfBirth) . ']�^���^�����܂����B');
        }
        if (gettype($inParamGenderCode) !== 'integer' &amp;&amp; gettype($inParamGenderCode) !== 'NULL') {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.setInputParameter ��5�Ԗڂ̃p�����[�^��[integer]�^�łȂ��Ă͂Ȃ�܂���B���������ۂɂ�[' . gettype($inParamGenderCode) . ']�^���^�����܂����B');
        }

        if ($this-&gt;fStatement == NULL) {
            $this-&gt;prepareStatement();
        }

        // SQL���̓p�����[�^[inParamAuthorCode]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamAuthorCode', $inParamAuthorCode, PDO::PARAM_INT);

        // SQL���̓p�����[�^[inParamAuthorName]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamAuthorName', $inParamAuthorName, PDO::PARAM_STR);

        // SQL���̓p�����[�^[inParamAuthorNameKana]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamAuthorNameKana', $inParamAuthorNameKana, PDO::PARAM_STR);

        // SQL���̓p�����[�^[inParamDateOfBirth]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamDateOfBirth', $inParamDateOfBirth, PDO::PARAM_STR);

        // SQL���̓p�����[�^[inParamGenderCode]��ݒ肵�܂��B
        $this-&gt;fStatement-&gt;bindParam(':inParamGenderCode', $inParamGenderCode, PDO::PARAM_INT);
    }

    /**
     * ���s�^�N�G�������s���܂��B
     *
     * �f�[�^�x�[�X�̐���ᔽ�����������ꍇ�ɂ� IntegrityConstraintException ��O���������܂��B
     *
     * �V���O���������L���Ȃ̂ŃX�R�[�v��protected�Ƃ��܂��B
     * ���̃��\�b�h�̑���� ExecuteSingleUpdate���\�b�h�𗘗p���Ă��������B
     *
     * @return integer �������ꂽ�s��
     */
    protected /*.int.*/ function executeUpdate() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.executeUpdate �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        if ($this-&gt;fStatement == NULL) {
            // PreparedStatement�����擾�̏�ԂȂ̂ŁAExecuteNonQuery()���s�ɐ旧��PrepareStatement()���\�b�h���Ăяo���Ď擾���܂��B
            $this-&gt;prepareStatement();
        }

        // TODO ��O�����������Ă��܂���B
        $result = $this-&gt;fStatement-&gt;execute();
        return $this-&gt;fStatement-&gt;rowCount();
    }

    /**
     * ���s�^�N�G�������s���܂��B
     *
     * �f�[�^�x�[�X�̐���ᔽ�����������ꍇ�ɂ� IntegrityConstraintException ��O���������܂��B
     *
     * single�������L��
     * ���s���ʂ�1���ȊO�̏ꍇ�ɂ́ANotSingleRowException�N���X��
     * �h�������N���X�̗�O���������܂��B
     */
    public /*.void.*/ function executeSingleUpdate() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.executeSingleUpdate �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        $result = $this-&gt;executeUpdate();

        if ($result == 0) {
            throw new NoRowModifiedException(&quot;�s���ꌏ���ύX����܂���ł����B&quot;);
        } else if ($result &gt; 1) {
            $message = &quot;�ꌏ�𒴂���s���ύX����Ă��܂��܂����B�e���̂���������:&quot; . $result;
            throw new TooManyRowsModifiedException($message);
        }
    }

    /**
     * �X�e�[�g�����g (PDOStatement) ���擾���܂��B
     *
     * ���̃��\�b�h���Ăяo�����Ƃ͐�������܂���B��ʓI�� Statement�𒼐ڗ��p����K�v�͂���܂���B
     *
     * @return PDOStatement Statement�I�u�W�F�N�g
     */
    public /*.PDOStatement.*/ function getStatement() {
        /* �p�����[�^�̐��A�^�`�F�b�N���s���܂��B */
        if (func_num_args() !== 0) {
            throw new Exception('[ArgumentException]: SimpleAuthorInsertInvoker.getStatement �̃p�����[�^��[0]�ł���K�v������܂��B���������ۂɂ�[' . func_num_args() .  ']�̃p�����[�^�𔺂��ČĂяo����܂����B');
        }

        return $this-&gt;fStatement;
    }
}
?&gt;</pre>
      </TD>
    </TR>
  </TBODY>
</TABLE>
</BLOCKQUOTE>
<HR>
<address><A HREF="../memo/memoigapyon.html">�����҂��ɂ���</A><BR>
Last modified: $Date: 2010/09/27 20:42:49 $</address>
</BODY>
</HTML>
