<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<TITLE>2005/09/06 日記: blancoResourceBundle正式版リリース , Javaリモートデバッグ , Eclipseプラグインのリモートデバッグ方法</TITLE>
<META name="DESCRIPTION" content="Excel様式からプロパティファイルを自動生成するblancoResourceBundleの初の正式版リリースです。">
<META name="KEYWORDS" content="いがぴょんの日記v2,diary,igapyon">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 9.0.1.0 for Windows">
<META name="DATE" content="2010-09-27T20:42:48+09:00">
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META http-equiv="Content-Style-Type" content="text/css">
<LINK rel="INDEX" href="index.html">
<LINK rel="CONTENTS" href="index.html">
<LINK rel="stylesheet" href="../../css/table.css" type="text/css" id="_HPB_TABLE_CSS_ID_">
</HEAD>
<BODY bgcolor="#eeddcc">
<TABLE border="0"><TBODY><TR>
  <TD valign="top">
    <A href="../memo/memoigapyon.html">
      <IMG src="../images/iga200306s.jpg" border="0" ALT="いがぴょん画像(小) 2003/06">
    </A>
  </TD>
  <TD valign="top">
    <H2>2005/09/06 日記: blancoResourceBundle正式版リリース , Javaリモートデバッグ , Eclipseプラグインのリモートデバッグ方法</H2>
    <P>[いがぴょんの日記v2,diary,igapyon] Excel様式からプロパティファイルを自動生成するblancoResourceBundleの初の正式版リリースです。</P>
  </TD>
</TR></TBODY></TABLE>

<!-- adv -->
<CENTER>
<TABLE bgcolor="#ffff00" summary="adv">
  <TBODY>
    <TR>

      <TD align="center">広告: <A href="http://journal.mycom.co.jp/column/ide/091/">イマドキのIDE事情: Eclipseベースの統合翻訳環境「Benten」を使ってみよう</A> <FONT color="#ff0000" size="-1">09/27</FONT><BR>
        <FONT size="-1">たげぞうさんの手による Benten 紹介記事!</FONT></TD>

    </TR>
  </TBODY>
</TABLE>
</CENTER>
<!-- adv -->




<P> </P>

<DIV align="right">
<TABLE cellpadding="4">
  <TBODY>
    <TR bgcolor="#99ccff">
      <TD><A href="../idxall.html">インディックスページへ戻る</A></TD>
    </TR>
  </TBODY>
</TABLE>
</DIV>



<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>blancoResourceBundle正式版リリース</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P>Excel様式からプロパティファイルやJavaソースコードを自動生成する <A HREF="http://www.igapyon.jp/blanco/blancoresourcebundle.html" TITLE="「リソースバンドル定義書」という Excelブックから、プロパティファイルおよびリソースバンドルアクセスをおこなうソースコードを自動生成します。">blancoResourceBundle</A>
の初の正式版がリリースです。</P>
<UL>
  <LI><A HREF="http://www.igapyon.jp/blanco/blancoresourcebundle.html" TITLE="「リソースバンドル定義書」という Excelブックから、プロパティファイルおよびリソースバンドルアクセスをおこなうソースコードを自動生成します。">blancoResourceBundle</A>
</UL>
<P>私個人としても、このツールは かなり気に入っています。文字列に含まれる情報を java.text.MessageFormatクラスをうまく活用することにより置換文字列を検知しているあたりは、純粋に素晴らしいと思います。こういったところに
最低限の設定入力によって 最大限の効果を引き出すという blancoDbでのノウハウが生きています。(とりあえず置換文字列の検出を、<STRONG><FONT color="#ff00ff">自前で書いていない</FONT></STRONG>ところがポイントですね…)</P>
<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>blancoWsdlモックアップ作成</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P><A HREF="http://www.igapyon.jp/blanco/blancosoap.html" TITLE="「電文処理定義書」および「電文定義書」という Excelブックから、Webサービスを利用するためのソースコード等を自動生成します。">blancoSOAP</A>の中に blancoWsdlのモックアップを追加で作成しました。(<FONT color="#ff0000">2005.09.10変更</FONT> blancoWsdlは <A HREF="http://www.igapyon.jp/blanco/blancosoap.html" TITLE="「電文処理定義書」および「電文定義書」という Excelブックから、Webサービスを利用するためのソースコード等を自動生成します。">blancoSOAP</A>のサブプロジェクトということで落ち着きました)<BR>
Excelブックに電文定義などをおこない、それから WSDLを自動生成するという たあいのないものですが、WSDLがニガテな私はとっても重宝します。</P>
<P>フィールドチェックを (シンプル型定義あるいはコンプレックス型定義として) 生成すべきかどうかについての検討を実施中です。実際のところ xsdにいろいろ書いても
SOAP実装が応じてくれない可能性もあります。</P>
<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>blancoDb Enterprise Editionプラグイン、ブラッシュアップ中</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P><A HREF="http://www.igapyon.jp/blanco/blancodb.html" TITLE="「SQL定義書」という Excelブックから、データベース入出力のためのソースコードを自動生成します。">blancoDb</A> Enterprise Edition プラグインにバグなどを見つけ、修正などをおこないました。</P>
<P>それとは別に メモリリークしている模様です (T_T) プラグイン化して初めて顕在化しているのでしょう。Antタスクで毎回プロセスが終了していた頃には、正直なところ
気がつきませんでした。<BR>
<FONT color="#ff0000">2005.09.10後日談</FONT> このバグは 現時点では EclipseのJFace APIのバグによるメモリリークである模様との結論で考えています。</P>
<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>リモートデバッグ</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P>そんなことで、リモートデバッグできるプロファイラを探索中です。</P>
<P>はて、J2SE 5.0以降には標準搭載されていたような話を聞いたような気がしますが、すぐには思い出せません。</P>
<UL>
  <LI>Java Platform Debugger Architecture<BR>
  <A HREF="http://java.sun.com/j2se/1.5.0/ja/docs/ja/guide/jpda/index.html">http://java.sun.com/j2se/1.5.0/ja/docs/ja/guide/jpda/index.html</A><BR>
  ここからたどっていけるのかしら…
  <LI>jconsole.exe<BR>
  これだったような気も…、、、はて、あらためて jdkのbinフォルダを見たら、全く認識したことがないコマンドが多数…。勉強しなおさないと これはフォローできませぬ。
</UL>
<P>関係しそうなリンクをメモしておきます。</P>
<UL>
  <LI>Java開発の問題解決を助ける: プロファイラでメモリリークとパフォーマンス問題を解決<BR>
  <A HREF="http://www.atmarkit.co.jp/fjava/rensai3/debug02/debug02_1.html">http://www.atmarkit.co.jp/fjava/rensai3/debug02/debug02_1.html</A>
  <LI>第6回　Eclipseをプロファイラとして活用する<BR>
  <A HREF="http://www.atmarkit.co.jp/fjava/rensai2/eclipse2_06/eclipse06_1.html">http://www.atmarkit.co.jp/fjava/rensai2/eclipse2_06/eclipse06_1.html</A>
</UL>
<HR>
<P><FONT color="#ff0000">2005.09.08</FONT> 読者の<A href="http://d.hatena.ne.jp/masanobuimai/">mars</A>さんからのツッコミ</P>
<P><CITE>Subject:プロファイラをお探しのようですが...<BR>
はじめまして、<A href="http://d.hatena.ne.jp/masanobuimai/">いまい(mars)</A>です。<BR>
いつも日記拝見させてもらってます。<BR>
<BR>
トラックバック送れないのでメールにて失礼しますが、リモートで監視できるプロファイラをお探しのようですが、NetBeans Profilerをオススメします。<BR>
軽いしフリーだし、Solarisでも使えるしベンリです。</CITE></P>
<UL>
  <LI><CITE><A HREF="http://profiler.netbeans.org/download.html">http://profiler.netbeans.org/download.html</A></CITE>
</UL>
<P><FONT color="#ff00ff">ここから</FONT><A HREF="https://www.igapyon.jp/igapyon/diary/memo/memoigapyon.html" TITLE="いがぴょんに関する説明">いがぴょん</A><BR>
ツッコミありがとうございます。<BR>
わたしも<A href="http://d.hatena.ne.jp/masanobuimai/">mars</A>さんの日記は いつも拝見させていただいております。<BR>
NetBeans Profiler、ぜひ試してみます。</P>
<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>Eclipseプラグインのリモートデバッグ方法</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P><FONT color="#ff0000">2005.09.08追記</FONT> Eclipseプラグインをリモートデバッグするための方法を下記にメモしておきます。J2SE 5.0の基本機能を用いた方法になります。パッケージソフトなど追加ソフトを何も入れずに解析ということで、緊急時の対応方法になります
(気の利いたパッケージソフトを利用して解析した方が、ずっと楽な場合があります)。いずれも Eclipse 3.1で動作確認を取りました。</P>
<P>Java Press vol.41 p43, 55の記事を参考にさせていただきました。この号、メモリ関連で困っている私に超ヒットしました。vol.41は
まさにメモリ特集号ですね。これだけのJavaメモリ関連情報が集まっているのは非常に価値があると思います。</P>
<P><B><FONT color="#ff00ff">Eclipseプラグインをjconsoleを用いてメモリ状況監視を行う方法</FONT></B></P>
<OL>
  <LI>Eclipseを jmxremoteオプション付きで起動します。<BR>
  eclipse -vmargs -Dcom.sun.management.jmxremote
  <LI>コマンドプロンプトから jconsoleを起動します。<BR>
  jconsole [改行]
  <LI>jconsoleから[接続]を行います。<BR>
  jmxremoteオプション付きで起動した Eclipseが一覧に出てくるので、それを選んで [接続] を行います。
</OL>
<P><B><FONT color="#ff00ff">Eclipseプラグインを hprofを利用してプロファイリングする方法</FONT></B></P>
<OL>
  <LI>Eclipseを -Xrunhprofオプション付きで起動します。<BR>
  eclipse -clean -vm &quot;C:\Program Files\Java\jdk1.5.0_03\bin\java.exe&quot;
  -vmargs -Xrunhprof:heap=sites,depth=10
  <UL>
    <LI>Eclipse に -vmargsを用いて JavaVM用の引数を引き渡します。
    <LI>メモリ上の巨大なメモリゴミを発見したいので、heap=sitesオプションを付けます。
    <LI>ある程度の長さのスタックトレースが欲しいので depth=10 (ここでは10階層までのスタックトレースを取得するという意味) を指定します。<BR>
    ただし、あまり深いスタックトレースを指定すると、とっても動作が遅くなります。
  </UL>
  ※hprofのオプションは java -Xrunhprof:help で調べることができます。
  <LI>プロファイリングを行いたいタイミングで、CTRL+Breakを押します。<BR>
  CTRL+Breakを実行してしばらく後、java.hprof.txtテキストファイルの中身をチェックすることができます。
  <LI>プロセスを正規のルートで終了させます。<BR>
  これで、プロセス終了時点でのメモリ状況がjava.hprof.txtテキストファイルに格納されます。
  <LI>テキストファイル内の SITESのトップ10くらいを見て、まずそうなエントリのスレッドを番号をもとに検索し、該当スレッドのスタックトレースをチェックします。
</OL>
<P>これで、おおよそのメモリリーク箇所は把握できます。</P>
<HR>
<address><A HREF="../memo/memoigapyon.html">いがぴょんについて</A><BR>
Last modified: $Date: 2010/09/27 20:42:48 $</address>
</BODY>
</HTML>
