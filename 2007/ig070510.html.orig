<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<TITLE>2007/05/10 ï¿½ï¿½ï¿½L: Java: ï¿½Tï¿½ï¿½ï¿½vï¿½ï¿½: ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½</TITLE>
<META name="DESCRIPTION" content="Javaï¿½ï¿½ ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES (Triple DES) ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½cï¿½[ï¿½ï¿½ï¿½Ìƒgï¿½Cï¿½vï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È’Pï¿½Éï¿½ï¿½ï¿½Ä‚İ‚Ü‚ï¿½ï¿½ï¿½ï¿½B">
<META name="KEYWORDS" content="DES,DESede,ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES,ï¿½Ãï¿½ï¿½ï¿½,Java,JSSE,JCA">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 11.0.0.0 for Windows">
<META name="DATE" content="2010-09-27T20:42:50+09:00">
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META http-equiv="Content-Style-Type" content="text/css">
<LINK rel="INDEX" href="index.html">
<LINK rel="CONTENTS" href="index.html">
<LINK rel="stylesheet" href="../../css/table.css" type="text/css" id="_HPB_TABLE_CSS_ID_">
</HEAD>
<BODY bgcolor="#eeddcc">
<TABLE border="0"><TBODY><TR>
  <TD valign="top">
    <A href="../memo/memoigapyon.html">
      <IMG src="../../image/iga200306s.jpg" border="0" ALT="ï¿½ï¿½ï¿½ï¿½ï¿½Ò‚ï¿½ï¿½æ‘œ(ï¿½ï¿½) 2003/06">
    </A>
  </TD>
  <TD valign="top">
    <H2>2007/05/10 ï¿½ï¿½ï¿½L: Java: ï¿½Tï¿½ï¿½ï¿½vï¿½ï¿½: ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½</H2>
    <P>[DES,DESede,ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES,ï¿½Ãï¿½ï¿½ï¿½,Java,JSSE,JCA] Javaï¿½ï¿½ ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES (Triple DES) ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½cï¿½[ï¿½ï¿½ï¿½Ìƒgï¿½Cï¿½vï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È’Pï¿½Éï¿½ï¿½ï¿½Ä‚İ‚Ü‚ï¿½ï¿½ï¿½ï¿½B</P>
  </TD>
</TR></TBODY></TABLE>

<!-- adv -->
<CENTER>
<TABLE bgcolor="#ffff00" summary="adv">
  <TBODY>
    <TR>

      <TD align="center">ï¿½Lï¿½ï¿½: <A href="http://journal.mycom.co.jp/column/ide/091/">ï¿½Cï¿½}ï¿½hï¿½Lï¿½ï¿½IDEï¿½ï¿½ï¿½ï¿½: Eclipseï¿½xï¿½[ï¿½Xï¿½Ì“ï¿½ï¿½ï¿½ï¿½|ï¿½ï¿½Â‹ï¿½ï¿½uBentenï¿½vï¿½ï¿½ï¿½gï¿½ï¿½ï¿½Ä‚İ‚æ‚¤</A> <FONT color="#ff0000" size="-1">09/27</FONT><BR>
        <FONT size="-1">ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ìï¿½É‚ï¿½ï¿½ Benten ï¿½Ğ‰ï¿½Lï¿½ï¿½!</FONT></TD>

    </TR>
  </TBODY>
</TABLE>
</CENTER>
<!-- adv -->




<P> </P>

<DIV align="right">
<TABLE cellpadding="4">
  <TBODY>
    <TR bgcolor="#99ccff">
      <TD><A href="../idxall.html">ï¿½Cï¿½ï¿½ï¿½fï¿½Bï¿½bï¿½Nï¿½Xï¿½yï¿½[ï¿½Wï¿½Ö–ß‚ï¿½</A></TD>
    </TR>
  </TBODY>
</TABLE>
</DIV>



<TABLE summary="mini title">
  <TBODY>
    <TR>
      <TD bgcolor="#ff9900" valign="top"><FONT color="#ffffff" size="+1"><STRONG>Java: ï¿½Tï¿½ï¿½ï¿½vï¿½ï¿½: ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½</STRONG></FONT></TD>
    </TR>
  </TBODY>
</TABLE>
<P>Javaï¿½ï¿½ ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES (Triple DES) ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½cï¿½[ï¿½ï¿½ï¿½Ìƒgï¿½Cï¿½vï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È’Pï¿½Éï¿½ï¿½ï¿½Ä‚İ‚Ü‚ï¿½ï¿½ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½Ìƒ\ï¿½[ï¿½Xï¿½Rï¿½[ï¿½hï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B</P>
<P>ï¿½|ï¿½Cï¿½ï¿½ï¿½g</P>
<UL>
  <LI>JDK 5.0 ï¿½ï¿½APIï¿½Ì‚İ‚Å\ï¿½ï¿½
  <LI>ï¿½Ãï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ SHA-256ï¿½_ï¿½Cï¿½Wï¿½Fï¿½Xï¿½gï¿½lï¿½Åì¬<BR>
  ï¿½Zï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ìï¿½Ìï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½ï¿½ï¿½Æ‚ï¿½ï¿½Ä‚ï¿½ï¿½Aï¿½_ï¿½Cï¿½Wï¿½Fï¿½Xï¿½gï¿½lï¿½Ì—pï¿½É‚ï¿½ï¿½ï¿½Ä\ï¿½ï¿½ï¿½Èƒrï¿½bï¿½gï¿½ï¿½ï¿½ğ“¾‚é‚±ï¿½Æ‚ï¿½ï¿½oï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
  <LI>ï¿½pï¿½Xï¿½ï¿½ï¿½[ï¿½hï¿½ï¿½ï¿½Ôˆï¿½ï¿½ï¿½ï¿½ï¿½ê‡ï¿½É‚ï¿½<STRONG>ï¿½ï¿½ï¿½xï¿½ï¿½ï¿½Åï¿½ï¿½ï¿½Iï¿½ï¿½</STRONG><BR>
  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É‚ï¿½ï¿½pï¿½Xï¿½ï¿½ï¿½[ï¿½hï¿½Nï¿½ï¿½ï¿½bï¿½Nï¿½Ìƒï¿½ï¿½Xï¿½Nï¿½ï¿½áŒ¸ï¿½ï¿½ï¿½ï¿½ï¿½é‚½ï¿½ß‚É•Kï¿½vï¿½È‚ï¿½ï¿½Æ‚ï¿½ï¿½Æï¿½ï¿½Ílï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B
  <LI>ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DESï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½Ì—p<BR>
  AESï¿½ï¿½ Java 6ï¿½È~ï¿½Å‚Ì’ñ‹Ÿ‚É‚È‚ï¿½ï¿½Ä‚ï¿½ï¿½Ü‚ï¿½ï¿½BJDK 5.0ï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½ÌŒï¿½ï¿½ï¿½Å‚ï¿½ ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DESï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½ÌÌ—pï¿½ï¿½ï¿½Ã“ï¿½ï¿½Ælï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B
  <LI>TODO: ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É‘ï¿½ï¿½İ‚ï¿½ï¿½ï¿½Æ‚ï¿½ï¿½Ì•ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É‚Â‚ï¿½ï¿½ÄAï¿½ï¿½ï¿½İ‚Í‹ï¿½ï¿½sï¿½ï¿½ï¿½ï¿½æ‚¤ï¿½É‚È‚ï¿½ï¿½Ä‚ï¿½ï¿½Ü‚ï¿½ï¿½B<BR>
  ï¿½ï¿½ï¿½ï¿½ÍAï¿½Ùï¿½Iï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ‚ï¿½ï¿½ï¿½Ì‚ï¿½ï¿½Ç‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ê‚¢ï¿½Ü‚ï¿½ï¿½ï¿½B
</UL>
<BLOCKQUOTE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD bgcolor="#ffff00">BlancoDesede.java</TD>
    </TR>
  </TBODY>
</TABLE>
<TABLE border="1">
  <TBODY>
    <TR>
      <TD><pre>/**
 * ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES (Triple DES) ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½cï¿½[ï¿½ï¿½ï¿½B
 */
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;

/**
 * ï¿½gï¿½ï¿½ï¿½vï¿½ï¿½DES (Triple DES) ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½É‚ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½Ãï¿½ï¿½ï¿½ï¿½cï¿½[ï¿½ï¿½ï¿½B
 * 
 * ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½ÌŠgï¿½ï¿½ï¿½qï¿½É‚ï¿½ï¿½Aï¿½Ãï¿½ï¿½ï¿½ï¿½^ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ì”ï¿½ï¿½fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È‚ï¿½ï¿½æ‚¤ï¿½É‚È‚ï¿½ï¿½Ä‚ï¿½ï¿½Ü‚ï¿½ï¿½B
 * 
 * @author ï¿½É‰ï¿½qï¿½ï¿½
 * @version 2007.05.10
 */
public class BlancoDesede {
    /**
     * ï¿½ï¿½ï¿½pï¿½ï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½B
     */
    private static final String ALGORITHM = &quot;DESede&quot;;

    /**
     * ï¿½Ãï¿½ï¿½ï¿½ï¿½ï¿½Ìƒtï¿½@ï¿½Cï¿½ï¿½ï¿½É•tï¿½^ï¿½ï¿½ï¿½ï¿½é•¶ï¿½ï¿½ï¿½ï¿½B
     */
    private static final String ENCRYPTED_FILE_EXT = &quot;.blancodesede&quot;;

    private static final String KEY_DIGEST_ALGORITHM = &quot;SHA-256&quot;;

    /**
     * ï¿½pï¿½Xï¿½ï¿½ï¿½[ï¿½hï¿½Bï¿½êï¿½Iï¿½É‹Lï¿½ï¿½ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß‚É‚ï¿½ï¿½Ìƒtï¿½Bï¿½[ï¿½ï¿½ï¿½hï¿½Ïï¿½ï¿½ğ—˜—pï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
     */
    private String fPass = null;

    /**
     * ï¿½pï¿½Xï¿½ï¿½ï¿½[ï¿½hï¿½ï¿½İ’è‚µï¿½Ü‚ï¿½ï¿½B
     * 
     * @param argPass
     */
    public void setPass(final String argPass) {
        fPass = argPass;
    }

    /**
     * ï¿½ï¿½ï¿½Ìƒcï¿½[ï¿½ï¿½ï¿½Ìgï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Å‚ï¿½ï¿½B
     */
    private static final void usage() {
        System.out.println(&quot;Usage:&quot;);
        System.out.println(&quot;  ï¿½Ãï¿½ï¿½ï¿½: java BlancoDesede ï¿½ï¿½ï¿½Íƒtï¿½@ï¿½Cï¿½ï¿½ password&quot;);
        System.out.println(&quot;  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½: java BlancoDesede ï¿½ï¿½ï¿½Íƒtï¿½@ï¿½Cï¿½ï¿½&quot;
                + ENCRYPTED_FILE_EXT + &quot; password&quot;);
        System.out.println(&quot;ï¿½ï¿½ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½ï¿½ï¿½É‚Í‹ó”’‚ï¿½ï¿½Ü‚Ü‚È‚ï¿½ï¿½æ‚¤ï¿½É‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B&quot;);
        System.out.println(&quot;ï¿½ï¿½ï¿½gï¿½ï¿½ï¿½qï¿½ï¿½ [&quot; + ENCRYPTED_FILE_EXT + &quot;]&quot;
                + &quot; ï¿½Ìê‡ï¿½É‚Í•ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½[ï¿½hï¿½Æ”ï¿½ï¿½fï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B&quot;);
    }

    /**
     * ï¿½ï¿½ï¿½ÌƒNï¿½ï¿½ï¿½Xï¿½ÌƒGï¿½ï¿½ï¿½gï¿½ï¿½ï¿½|ï¿½Cï¿½ï¿½ï¿½gï¿½B
     * 
     * @param args
     */
    public static void main(final String[] args) {
        if (args.length &lt; 2) {
            // ï¿½ï¿½ï¿½ï¿½ï¿½Ìï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½B
            usage();
            return;
        }

        final BlancoDesede angou = new BlancoDesede();
        angou.setPass(args[1]);

        final String inFileName = args[0];

        System.out.println(&quot;ï¿½tï¿½@ï¿½Cï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½[&quot; + inFileName + &quot;]&quot;);

        if (new File(inFileName).exists() == false) {
            System.out.println(&quot;ï¿½wï¿½ï¿½Ìƒtï¿½@ï¿½Cï¿½ï¿½[&quot; + inFileName + &quot;]ï¿½ÍŒï¿½ï¿½Â‚ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B&quot;);
            return;
        }

        try {
            if (inFileName.endsWith(ENCRYPTED_FILE_EXT) == false) {
                System.out.println(&quot;  ï¿½ï¿½ï¿½[ï¿½h:ï¿½Ãï¿½ï¿½ï¿½&quot;);
                angou.encrypt(new File(inFileName), new File(inFileName
                        + ENCRYPTED_FILE_EXT));
            } else {
                System.out.println(&quot;  ï¿½ï¿½ï¿½[ï¿½h:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½&quot;);
                angou.decrypt(new File(inFileName), new File(inFileName
                        .substring(0, inFileName.length()
                                - ENCRYPTED_FILE_EXT.length())));
            }

            System.out.println(&quot;ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B&quot;);
        } catch (IOException e) {
            System.out.println(&quot;ï¿½ï¿½ï¿½oï¿½Í—ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B:&quot; + e.toString());
            e.printStackTrace();
        }
    }

    /**
     * ï¿½^ï¿½ï¿½ï¿½ï¿½ê‚½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ‚É”é–§ï¿½ï¿½ï¿½ï¿½ï¿½ì¬ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
     * 
     * @param strKey
     *            ï¿½é–§ï¿½ï¿½ï¿½Ìï¿½Æ‚È‚é•¶ï¿½ï¿½ï¿½ï¿½B
     * @return
     */
    private SecretKey getSecretKey(final String strKey) {
        // ï¿½ï¿½ï¿½Ìï¿½ï¿½ï¿½_ï¿½Cï¿½Wï¿½Fï¿½Xï¿½gï¿½ï¿½ï¿½ï¿½ï¿½ÄŒï¿½ï¿½Æ‚ï¿½ï¿½Ä—ï¿½ï¿½pï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
        // ï¿½|ï¿½Cï¿½ï¿½ï¿½g: SHA-256ï¿½ï¿½32ï¿½oï¿½Cï¿½gï¿½ï¿½ï¿½ï¿½Ì‚ÅADESedeï¿½Å•Kï¿½vï¿½Æ‚È‚ï¿½24ï¿½oï¿½Cï¿½gï¿½ï¿½è’·ï¿½ï¿½ï¿½Ì‚Å“sï¿½ï¿½ï¿½ï¿½ï¿½Ç‚ï¿½ï¿½B
        final byte[] digestedKey;
        try {
            final MessageDigest msgDigest = MessageDigest
                    .getInstance(KEY_DIGEST_ALGORITHM);
            msgDigest.update(strKey.getBytes());
            digestedKey = msgDigest.digest();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½_ï¿½Cï¿½Wï¿½Fï¿½Xï¿½g[&quot; + KEY_DIGEST_ALGORITHM
                    + &quot;]ï¿½æ“¾ï¿½Éï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot; + e.toString());
        }

        // ï¿½ï¿½ï¿½Û‚É—ï¿½ï¿½pï¿½ï¿½ï¿½ï¿½Lï¿½[ï¿½ï¿½ï¿½ì¬ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
        final byte[] keySeed = new byte[24];
        for (int index = 0; index &lt; keySeed.length; index++) {
            keySeed[index] = digestedKey[index];
        }

        try {
            final SecretKeyFactory factory = SecretKeyFactory
                    .getInstance(ALGORITHM);
            return factory.generateSecret(new DESedeKeySpec(keySeed));
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½Ìæ“¾ï¿½Éï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot;
                    + e.toString());
        } catch (InvalidKeyException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½é–§ï¿½ï¿½ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Å‚ï¿½ï¿½B:&quot; + e.toString());
        } catch (InvalidKeySpecException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½é–§ï¿½ï¿½ï¿½Ìdï¿½lï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Å‚ï¿½ï¿½B:&quot; + e.toString());
        }
    }

    /**
     * ï¿½Ãï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È‚ï¿½ï¿½Ü‚ï¿½ï¿½B
     * 
     * @param inFile
     * @param outFile
     * @throws IOException
     */
    private void encrypt(final File inFile, final File outFile)
            throws IOException {
        final Cipher cipher;
        try {
            final InputStream inStream = new BufferedInputStream(
                    new FileInputStream(inFile));

            cipher = Cipher.getInstance(ALGORITHM);
            cipher.init(Cipher.ENCRYPT_MODE, getSecretKey(fPass));

            final OutputStream outStream = new CipherOutputStream(
                    new BufferedOutputStream(new FileOutputStream(outFile)),
                    cipher);

            copy(inStream, outStream);

            outStream.flush();
            outStream.close();

            inStream.close();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½Ìæ“¾ï¿½Éï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot;
                    + e.toString());
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½pï¿½fï¿½Bï¿½ï¿½ï¿½Oï¿½sï¿½ï¿½ï¿½Åï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot;
                    + e.toString());
        } catch (InvalidKeyException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½é–§ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Åï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot; + e.toString());
        }
    }

    /**
     * ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
     * 
     * @param inFile
     * @param outFile
     * @throws IOException
     */
    private void decrypt(final File inFile, final File outFile)
            throws IOException {
        try {
            final Cipher cipher = Cipher.getInstance(ALGORITHM);
            cipher.init(Cipher.DECRYPT_MODE, getSecretKey(fPass));
            final InputStream inStream = new CipherInputStream(
                    new BufferedInputStream(new FileInputStream(inFile)),
                    cipher);

            final OutputStream outStream = new BufferedOutputStream(
                    new FileOutputStream(outFile));

            copy(inStream, outStream);

            inStream.close();

            outStream.flush();
            outStream.close();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½Aï¿½ï¿½ï¿½Sï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½Ìæ“¾ï¿½Éï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot;
                    + e.toString());
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½pï¿½fï¿½Bï¿½ï¿½ï¿½Oï¿½sï¿½ï¿½ï¿½Åï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot;
                    + e.toString());
        } catch (InvalidKeyException e) {
            e.printStackTrace();
            throw new IllegalArgumentException(&quot;ï¿½é–§ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Åï¿½ï¿½sï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B:&quot; + e.toString());
        }
    }

    /**
     * ï¿½Xï¿½gï¿½ï¿½ï¿½[ï¿½ï¿½ï¿½ï¿½ï¿½Rï¿½sï¿½[ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B
     * 
     * @param inStream
     * @param outStream
     * @throws IOException
     */
    private void copy(final InputStream inStream, final OutputStream outStream)
            throws IOException {
        final byte[] byteBuf = new byte[1024];
        for (;;) {
            int length = inStream.read(byteBuf);
            if (length &lt;= 0) {
                break;
            }
            outStream.write(byteBuf, 0, length);
        }
    }
}</pre></TD>
    </TR>
  </TBODY>
</TABLE>
</BLOCKQUOTE>
<P><FONT color="#ff0000">2007.10.17ï¿½Ç‹L</FONT> ï¿½ï¿½ï¿½Ìƒ\ï¿½[ï¿½Xï¿½Rï¿½https://www.igapyon.jp/www.igapyon.jp/blanco/blanco.ja.html" TITLE="blanco Framework ï¿½ï¿½ ï¿½Iï¿½[ï¿½vï¿½ï¿½ï¿½\ï¿½[ï¿½Xï¿½Å’ñ‹Ÿ‚ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ blancoDbï¿½ï¿½blancoStrutsï¿½È‚Ç‚ÌWï¿½ï¿½ï¿½Ì‚Å‚ï¿½ï¿½Bï¿½ï¿½{ï¿½Iï¿½ï¿½ Javaï¿½\ï¿½[https://www.igapyon.jp/Ú“Iï¿½Æ‚ï¿½ï¿½Ü‚ï¿½ï¿½B">blanco Framework</A> ï¿½ï¿½ <A HREF="http://www.igapyon.jp/blanco/blancodownload.html#blancoEncryption" TITLE="ï¿½Ãï¿½ï¿½ï¿½ï¿½Eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½È’Pï¿½É—ï¿½ï¿½pï¿½Å‚ï¿½ï¿½ï¿½æ‚¤ï¿½É‚ï¿½ï¿½é‚½ï¿½ß‚ï¿½Javaï¿½ï¿½ï¿½Cï¿½uï¿½ï¿½ï¿½ï¿½(jarï¿½tï¿½@ï¿½Cï¿½ï¿½)ï¿½Å‚ï¿½ï¿½B
">blancoEncryption</A>
ï¿½Ö‚Æ”ï¿½ï¿½Wï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½ï¿½B</P>
<HR>
<address><A HREF="../memo/memoigapyon.html">ï¿½ï¿½ï¿½ï¿½ï¿½Ò‚ï¿½ï¿½É‚Â‚ï¿½ï¿½ï¿½</A><BR>
Last modified: $Date: 2010/09/27 20:42:50 $</address>
</BODY>
</HTML>
